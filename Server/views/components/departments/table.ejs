<div class="table-responsive">
  <table class="table table-hover table-striped-columns table-bordered border-dark align-middle caption-top">
    <caption class="mx-4 fs-5">
      <span>العدد: <%= data.length %></span>
    </caption>
    <thead>
      <tr class="table-dark">
        <th scope="col">الرقم</th>
        <th scope="col">إسم القسم</th>
        <th scope="col">أنشئ بواسطة</th>
        <th scope="col">آخر تحديث بواسطة</th>
        <th scope="col">تاريخ الإنشاء</th>
        <th scope="col">تاريخ آخر تحديث</th>
        <th scope="col">تحديث</th>
        <th scope="col">حذف</th>
      </tr>
    </thead>
    <tbody>
      <% data.forEach((department, index)=>{ %>
        <tr>
          <th class="table-dark" scope="row">
            <%= index+1 %>
          </th>
          <td>
            <%= department.name %>
          </td>
          <td>
            <%= (department.createdBy && department.createdBy.username) ? department.createdBy.username : 'لا يوجد' %>
          </td>
          <td>
            <%= (department.updatedBy && department.updatedBy.username) ? department.updatedBy.username : 'لا يوجد' %>
          </td>
          <td>
            <%= (department.createdAtArabic)?department.createdAtArabic:"لا يوجد" %>
          </td>
          <td>
            <%= (department.updatedAtArabic)?department.updatedAtArabic:"لا يوجد" %>
          </td>
          <td>
            <button class="btn btn-success"  data-bs-toggle="modal" data-bs-target="#update-department-modal-<%=index%>">تحديث</button>
            <%- include('update-modal', {index, department}) %>
          </td>
          <td>
            <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#delete-department-modal-<%=index%>">حذف</button>
            <%- include('delete-modal', {index, department}) %>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
</div>